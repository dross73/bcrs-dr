<!--
 * Title: register.component.html
 * Author: Professor Krasso
 * Date: 26 April 2021
 * Modified By: Juvenal Gonzalez
 * Description: hyperlink markup for register component
-->
<div fxLayout ="column" style='margin-top: 8%;'> <!--OUTER COLUMN-->
  <mat-card fxFlex style="width: 65%; margin: auto;"  class="mat-elevation-z8"> <!--OUTER MAT CARD-->
    <mat-card-title style="text-align: center; font-weight: lighter;"> Account Registration  </mat-card-title>

     <mat-card *ngIf='errorMessage' class="mat-elevation-z0" style="width: 75%;"><!--APPEARS IF THERE IS AN ERROR MESSAGE-->
      <mat-card-content>
          <div class="msg-error" style="font-weight: lighter;">
            {{errorMessage}
          <br/>}
          </div>
      </mat-card-content>
    </mat-card> <!--END ERROR MESSAGE CARD-->

    <form id="regForm" [formGroup]="registrationForm"> <!--REGISTRATION FORM-->
      <mat-card-content fxLayout='column' fxLayoutGap='10px'> <!--MAT CARD COLUMN-->
          <mat-horizontal-stepper #stepper> <!--STEPPER-->                      <!--Calls the designated stepper-->
             <mat-step fxFlex formGroupName='contactInformation' [stepControl]="registrationForm.get('contactInformation')"> <!--STEP 1 CONTACTS-->
              <ng-template matStepLabel>Contact Information</ng-template>

                <mat-list>
                    <mat-list-item>
                        <mat-form-field fxFlex>
                            <input matInput formControlName="firstName" placeholder="First name"/>
                        </mat-form-field>

                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <mat-form-field fxFlex>
                            <input matInput formControlName="lastName" placeholder="Last name"/>
                        </mat-form-field>
                    </mat-list-item>


                      <mat-list-item>
                          <mat-form-field fxFlex>
                              <input matInput formControlName="phoneNumber" placeholder="Phone number" mask="(000) 000-0000"/>
                          </mat-form-field>

                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          <mat-form-field fxFlex>
                              <input matInput formControlName="email" placeholder="email"/>
                          </mat-form-field>
                      </mat-list-item>

                      <br/><br/><br/>
                      <mat-list-item>
                        <mat-form-field fxFlex>
                            <textarea matInput formControlName='address' rows='5' placeholder='Address'></textarea>
                        </mat-form-field>
                      </mat-list-item>
                  </mat-list>

                  <br/><br/><br/>

                  <div fxLayoutAlign='end' fxFlex>
                      <button mat-raised-button color ='accent' matStepperNext>Next</button> <!--Button used to switch to next stepper-->
                  </div>
             </mat-step> <!--STEP 1 CONTACTS END-->

                  <mat-step formGroupName='securityQuestions' [stepControl]="registrationForm.get('securityQuestions')"> <!--STEP2-->
                    <ng-template matStepLabel>Security Questions</ng-template>

                    <mat-list>
                      <mat-list-item>
                          <mat-form-field fxFlex>
                            <mat-select formControlName="securityQuestion1" placeholder='Security question'>
                                <mat-option *ngFor='let question of securityQuestions' [value]="question.text"> <!--Loops through securityQuestions with question as the index-->
                                    {{question.text}}
                                </mat-option>
                            </mat-select>
                          </mat-form-field>

                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          <mat-form-field fxFlex>
                            <input matInput formControlName='answerToSecurityQuestion1' placeholder="Answer 1"/>
                          </mat-form-field>
                        </mat-list-item>

                        <mat-list-item>
                          <mat-form-field fxFlex>
                            <mat-select formControlName='securityQuestion2' placeholder='Security question'>
                                <mat-option *ngFor='let question of securityQuestions' [value]='question.text'>
                                    {{question.text}}
                                </mat-option>
                            </mat-select>
                          </mat-form-field>

                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          <mat-form-field fxFlex>
                            <input matInput formControlName='answerToSecurityQuestion2' placeholder="Answer 2"/>
                          </mat-form-field>
                        </mat-list-item>

                        <mat-list-item>
                          <mat-form-field fxFlex>
                            <mat-select formControlName='securityQuestion3' placeholder='Security question'>
                                <mat-option *ngFor='let question of securityQuestions' [value]='question.text'>
                                    {{question.text}}
                                </mat-option>
                            </mat-select>
                          </mat-form-field>

                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          <mat-form-field fxFlex>
                            <input matInput formControlName='answerToSecurityQuestion3' placeholder="Answer 3"/>
                          </mat-form-field>
                        </mat-list-item>
                    </mat-list>

                    <div fxLayoutAlign='end'>
                        <button mat-raised-button color='accent' matStepperPrevious>Back</button> &nbsp;
                        <button mat-raised-button color='accent' matStepperNext>Next</button>
                    </div>
                  </mat-step> <!--STEP 2 END-->

                  <mat-step formGroupName='credentials' [stepControl]="registrationForm.get('credentials')"> <!--Step 3-->
                    <ng-template matStepLabel>Credentials</ng-template>

                      <mat-list>
                        <mat-list-item>
                          <mat-form-field fxFlex>
                              <input matInput formControlName='userName' placeholder="User name"/>
                          </mat-form-field>
                        </mat-list-item>

                        <br/><br/>
                          <mat-list-item>
                            <mat-form-field fxFlex>
                                <input type='password' matInput formControlName='password' placeholder="Password -- Requirements: 8 Characters, 1 Uppercase Letter, 1 Special Character"/>
                            </mat-form-field>

                          </mat-list-item>
                      </mat-list>

                      <div fxLayoutAlign='end'>
                          <button mat-raised-button color='accent' matStepperPrevious>Back</button> &nbsp;
                          <button mat-raised-button (click)='register(registrationForm.value)' color='accent'
                                                     [disabled] ='!registrationForm.valid' type="submit">Submit</button>
                      </div>

                  </mat-step><!--STEP 3 END-->

          </mat-horizontal-stepper> <!--STEPPER END-->
              <a routerLink='/' class="return">Return</a>
      </mat-card-content> <!--MAT CARD COLUMN END-->

    </form> <!--REGISTRATION FORM END-->

  </mat-card><!--OUTER MAT CARD END-->
</div><!--OUTER COLUMN END-->
