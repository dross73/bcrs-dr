<!-- /**
 * Title: verify-security-questions-form.component.html
 * Author: Dan Ross
 * Date: 22 April 2021
 * Modified By: Dan Ross
 * Description: Verify security questions form component HTML
 */ -->


 <!-- TOOLBAR  -->




<br /><br />
<div fxLayout="row wrap" fxLayoutAlign="center start">
  <div fxFlex.gt-sm="55" fxFlex="100">
    <mat-card-title
      style="text-align: center; font-size: 48px; font-weight: lighter"
      class="mat-headline"
    >
      Verify Security Questions
    </mat-card-title>
    <br />
    <br />

    <!-- Make sure we get a response from the API call before populating form (*ngIf="selectedSecurityQuestions").
    Call the verifySecurityQuestions() on submit
    -->

    <mat-card-content
      fxLayout="column"
      *ngIf="selectedSecurityQuestions"
      [formGroup]="form"
      #usernameForm
    >
      <!-- Show an error if they get it wrong -->
      <small style="color: red" *ngIf="errorMessage">
        {{ errorMessage }}<br
      /></small>
      <!-- List the questions and answers -->
      <mat-list>
        <mat-list-item>
          {{ question1 }} &nbsp; &nbsp;
          <mat-form-field fxFlex>
            <input
              matInput
              [formControl]="form.controls['answerToSecurityQuestion1']"
              placeholder="Answer 1"
            />
          </mat-form-field>
        </mat-list-item>

        <mat-list-item>
          {{ question2 }} &nbsp; &nbsp;
          <mat-form-field fxFlex>
            <input
              matInput
              [formControl]="form.controls['answerToSecurityQuestion2']"
              placeholder="Answer 2"
            />
          </mat-form-field>
        </mat-list-item>

        <mat-list-item>
          {{ question3 }} &nbsp; &nbsp;
          <mat-form-field fxFlex>
            <input
              matInput
              [formControl]="form.controls['answerToSecurityQuestion3']"
              placeholder="Answer 3"
            />
          </mat-form-field>
        </mat-list-item>
      </mat-list>
      <br />
      <br />

      <div fxFlex fxLayoutAlign="end">
        <button
          mat-raised-button
          color="accent"
          routerLink="/session/forgot"
          style="margin-right: 20px"
        >
          Back
        </button>
        <button
          mat-raised-button
          color="accent"
          (click)="verifySecurityQuestions(); usernameForm.reset()"
          [disabled]="!form.valid"
        >
          Submit
        </button>
      </div>
    </mat-card-content>
  </div>
</div>
